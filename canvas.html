<html><head><script>
var ok=()=>{
  var g=document.getElementById("grid");var c=g.getContext("2d");
  var w=512;var h=512;var a={'width':'w','height':'h'};var dbc={'width':'clientWidth','height':'clientHeight'};
  for(var k in a){var dbv=document.body[dbc[k]];var v=dbv-32+0*window.screen[k];g[k]=v;eval(a[k]+'=v;');}
  document.title=JSON.stringify({w,h});
  var f=()=>window.requestAnimationFrame(()=>upd(g,c,w,h));f();
  //setInterval(()=>window.requestAnimationFrame(()=>upd(g,c,w,h)),60);
};
var t=0;
var line=(c,a,b)=>{c.moveTo(a.x,a.y);c.lineTo(b.x,b.y);}
var vec2d=(x,y)=>{return {x,y};}
var draw_grid=(c,w,h)=>{
  var fix=(x,dx)=>((x/dx)|0)*dx;
  var ls=2;var dv=64;var dx=dv;var dy=dv;var tw=fix(w,dx);var th=fix(h,dy);
  c.beginPath(); 
  for(var x=ls*0.5;x<w;x+=dx){c.moveTo(x,0);c.lineTo(x,th+ls);}
  for(var y=ls*0.5;y<h;y+=dy){c.moveTo(0,y);c.lineTo(tw+ls,y);}
  c.closePath(); 
  c.lineWidth=ls;c.strokeStyle="#000";c.stroke();
}
var rnd=()=>Math.random();
var points=[];for(var i=0;i<1000;i++){points.push(vec2d(rnd(),rnd()));}
var upd=(g,c,w,h)=>{
  t++;
  var ls=2;var hw=w*0.5;hh=h*0.5; var r=128;
  //c.clearRect(w/2-r,h/2-r,r+r,r+r);
  c.fillStyle="#FFF";c.clearRect(0,0,w,h);
  draw_grid(c,w,h);
  var draw_rot_line=(p,t)=>{
    var ang=t*3.14*2/60;
    c.beginPath();
    line(c,p,vec2d(p.x+Math.cos(ang)*r,p.y+r*Math.sin(ang)));
    c.lineWidth=ls;c.strokeStyle="#000";c.stroke();
    c.closePath();
  }
  //for(var x=-200;x<200;x+=16)for(var y=-200;y<200;y+=16){draw_rot_line(vec2d(w/2+x,h/2+y),(t+x+y)*0.3);}
  points.map(p=>vec2d(hw+(p.x-0.5)*w,hh+(p.y-0.5)*h)).map(p=>{draw_rot_line(p,(t+p.x+p.y)*0.3);});
  window.requestAnimationFrame(()=>upd(g,c,w,h));
}
</script></head>
<body onload="ok();"><center><canvas id="grid"></canvas></center></body></html>
