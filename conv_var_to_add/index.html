<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>conv_var_to_add</title><style type="text/css">textarea{width:99%}</style>
<script>
function go()
{
  /*var code=document.getElementById("code").value;
  var data=document.getElementById("data").value;*/
  var g_result=null;
  eval("g_result=(function(POST){"+document.getElementById('code').value+";\n}({code:document.getElementById('code').value,data:document.getElementById('data').value}));");
  document.getElementById("out").value=g_result;
  return g_result;
}
function go_from_json()
{
  var g_result=null;g_result=(function(POST){
  //===
    var jp=JSON.parse;
    var handle=e=>{
      var t=e.split(":").map(e=>e.trim()).map(e=>{if(e.slice(-1)==",")return e.slice(0,-1);return e;})
      var k=jp(t[0]);
      var v=t[1];
      var is_real="0123456789".split("").includes(v[0]);
      var out_t=is_real?"real":v;
      var out_n=k;
      if(is_real)out_n+="="+v;
      out_n+=";";
      return out_t+" "+out_n;
    }
    return POST.data.split("\n").map(handle).join("\n");
  //===
  }({data:document.getElementById('data').value}));
  document.getElementById("out").value=g_result;
  return g_result;
}
</script>
</head>
<body>
    <img style="display:none" src="http://adler.hol.es/github/dir.png" />
    <div style="display:none">
      <p><b>code:</b></p>
      <p><textarea rows="15" cols="120" name="code" id="code">var arr=POST['data'].split("\n");
for(var i=0;i<arr.length;i++)
{
  var f=arr[i].split("=").length;
  if(f>2)return "FAIL at line "+i;
  var a=arr[i].trim().split(" ").join(",").split("=").join(",").split(";").join("");
  arr[i]="ADD("+a+(f==1?",$":"")+")\\"
}
return "#define DEF_PRO_VARIABLE(ADD)\\\n"+arr.join("\n")+"\n//===\n#include \"defprovar.inl\"\n//===";</textarea></p>
    </div>
    <p><b>data:</b></p>
    <p><textarea spellcheck="false" rows="20" name="data" id="data"></textarea></p>
    <p><button onclick="go();">Go&nbsp;<i>//from cpp</i></button>&nbsp;&nbsp;&nbsp;<button onclick="go_from_json();">Go&nbsp;<i>//from JSON</i></button></p>
    <p><textarea spellcheck="false" rows="20" name="out" id="out"></textarea></p>
  <pre>see:     <a href="defproinit.inl">defproinit.inl</a>     <a href="defprovar.inl">defprovar.inl</a></pre>
  <h2>version 1.1</h2>
</body></html>
